/*
 * IOJD.c
 *
 *  Created on: 13/01/2017
 *      Author: taras
 */



#include "IOJD.h"
#include <stdio.h>



int setIO(){
	int Status;
	pins = 8;
	Status = XGpio_Initialize(&Gpio, GPIO_EXAMPLE_DEVICE_ID);
	if (Status != XST_SUCCESS) {
		return XST_FAILURE;
	}
	return XST_SUCCESS;
}

void pinMode(int pin, int mode){

	// for at sikre sig mod overflow
	if(pin > pins || pin < 0 || mode < 0 || mode > 1){
		return;
	}


	if(mode == 0){
		JDDIR = JDDIR & (0xff ^ (1 << pin));
	}else{
		JDDIR = JDDIR | (1 << pin);
	}

	XGpio_SetDataDirection(&Gpio, IO_CHANNEL, JDDIR);
}



void digitalWrite(int pin, int status){
	if(pin > pins || pin < 0 || status < 0 || status > 1){
		return;
	}
	if(status == 0){
		JDStat = JDStat & (0xff ^ (1 << pin));
	}else{
		JDStat = JDStat | (1 << pin);
	}

	XGpio_DiscreteWrite(&Gpio, IO_CHANNEL, JDStat);

}


void analogWrite(int pin, int time){

	printf("to be made");
}
