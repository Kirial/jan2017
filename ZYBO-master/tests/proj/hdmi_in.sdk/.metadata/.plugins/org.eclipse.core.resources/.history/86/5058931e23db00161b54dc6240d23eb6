/*
 * IOJD.c
 *
 *  Created on: 13/01/2017
 *      Author: taras
 */



#include "IOJD.h"
#include <stdio.h>

u8 JDDIR;
u8 JDStat;
unsigned int pins = 8;

int setIO(){
	int Status;
	Status = XGpio_Initialize(&Gpio, GPIO_EXAMPLE_DEVICE_ID);
	if (Status != XST_SUCCESS) {
		return XST_FAILURE;
	}
	return XST_SUCCESS;
}

void pinMode(int pin, int mode){

	if(pin > pins || pin < 0 || mode < 0 || mode > 1){
		return;
	}
	JD_DIR = XGpio_DiscreteRead(&Gpio, IO_CHANNEL);
	if(mode == 0){
		JD_DIR = JD_DIR & ((0xff << 0) << 1 << (pin-1));
		printf("printing pinmode %d \n\r",JD_DIR);
	}else{
		JD_DIR = JD_DIR | (0x00 <<  1 << pin);
		printf("printing pinmode %d \n\r",JD_DIR);
	}

	//XGpio_SetDataDirection(&Gpio, IO_CHANNEL, JD_DIR);
}


int test;

void digitalWrite(int pin, int status){
	if(pin > pins || pin < 0 || status < 0 || status > 1){
		return;
	}
	JD_Stat = XGpio_DiscreteRead(&Gpio, IO_CHANNEL);
	if(status == 0){
		JD_Stat = JD_Stat & ((0xff << 0) <<  (1 << (pin-1)));
		printf("printing output %d \n\r",JD_Stat);
	}else{
		JD_Stat = JD_Stat | (0x00 <<  (1 << pin));
		printf("printing output %d \n\r",JD_Stat);
	}

	//XGpio_DiscreteWrite(&Gpio, IO_CHANNEL, JD_Stat);

}


void analogWrite(int pin, int time){

	printf("to be made");
}
